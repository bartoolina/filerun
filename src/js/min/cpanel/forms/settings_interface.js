FR.editSettings={};FR.editSettings.formPanel=new FR.components.editForm({title:"Interface options",layout:"form",labelWidth:180,autoScroll:true,defaults:{width:520},items:[{xtype:"fieldset",defaults:{width:250},title:"Language",items:[{xtype:"combo",fieldLabel:"Default language",name:"settings[ui_default_language]",hiddenName:"settings[ui_default_language]",autoCreate:true,mode:"local",editable:false,emptyText:"Select...",displayField:"name",valueField:"id",triggerAction:"all",disableKeyFilter:true,value:FR.settings.ui_default_language,store:new Ext.data.SimpleStore({fields:["id","name"],data:FR.languages}),helpText:FR.T("Applies only to first time visitors. Your language preference has already been saved to your browser. You will not see a change if you select a different option here and logout, unless you specifically change it from the login form.")},{xtype:"checkbox",boxLabel:"Display language menu",width:300,value:1,name:"settings[ui_display_language_menu]",checked:parseInt(FR.settings.ui_display_language_menu)},{xtype:"compositefield",fieldLabel:"Upload language file",items:[{xtype:"button",text:"Upload file..",iconCls:"fa-upload",cls:"fr-btn-primary fr-btn-smaller",listeners:{afterrender:function(){this.flow=new Flow({target:"?module=cpanel&section=settings&page=interface&action=upload_translation",singleFile:true,startOnSubmit:true,validateChunkResponse:function(status,message){if(status!="200"){return"retry"}try{var rs=Ext.util.JSON.decode(message)}catch(er){return"retry"}if(rs){if(rs.success){return"success"}else{return"error"}}}});this.flow.on("fileSuccess",function(file,message){try{var rs=Ext.util.JSON.decode(message)}catch(er){FR.feedback("Unexpected server reply: "+message,"error")}if(rs&&rs.msg){FR.feedback(rs.msg,"success")}});this.flow.on("fileError",function(file,message){try{var rs=Ext.util.JSON.decode(message)}catch(er){FR.feedback("Unexpected server reply: "+message,"error")}if(rs&&rs.msg){FR.feedback(rs.msg,"error")}})}},handler:function(){this.flow.removeAll();this.flow.browseFiles()}},{xtype:"displayfield"}]},{xtype:"displayfield",style:"color: var(--theme-textLighter)",value:FR.T('Download more from <a href="%1" target="_blank">here</a>.').replace("%1","https://docs.filerun.com/translating_filerun")}]},{xtype:"fieldset",title:"Media library features",defaults:{width:250},items:[{xtype:"checkbox",boxLabel:'<i class="fa fa-fw fa-folder-image gray"></i> '+FR.T("Photos"),name:"settings[ui_media_folders_photos_enable]",inputValue:1,checked:parseInt(FR.settings.ui_media_folders_photos_enable)},{xtype:"checkbox",boxLabel:'<i class="fa fa-fw fa-play-circle gray"></i> '+FR.T("Videos"),name:"settings[ui_media_folders_videos_enable]",helpText:"Note: the Photos media section shows also videos. Enable this only if you wish to access videos separately.",inputValue:1,checked:parseInt(FR.settings.ui_media_folders_videos_enable)},{xtype:"checkbox",boxLabel:'<i class="fa fa-fw fa-folder-music gray"></i> '+FR.T("Music"),name:"settings[ui_media_folders_music_enable]",inputValue:1,checked:parseInt(FR.settings.ui_media_folders_music_enable)}]},{xtype:"fieldset",title:"Various features",defaults:{width:250},items:[{xtype:"checkbox",fieldLabel:"Enable collections",boxLabel:'<i class="fa fa-fw fa-clone gray"></i>',value:1,name:"settings[ui_enable_collections]",checked:parseInt(FR.settings.ui_enable_collections)},{xtype:"checkbox",fieldLabel:"Enable download cart",disabled:FR.system.isFree,boxLabel:'<i class="fa fa-fw fa-cart-arrow-down gray"></i>'+(FR.system.isFree?" ("+FR.T("Enterprise version only")+")":""),value:1,name:"settings[ui_enable_download_cart]",checked:parseInt(FR.settings.ui_enable_download_cart)},{xtype:"checkbox",fieldLabel:"Enable file rating",boxLabel:'<i class="fa fa-fw fa-star gray"></i><i class="fa fa-fw fa-star gray"></i><i class="fa fa-fw fa-star gray"></i><i class="fa fa-fw fa-star gray"></i><i class="fa fa-fw fa-star gray"></i>',value:1,name:"settings[ui_enable_rating]",checked:parseInt(FR.settings.ui_enable_rating)},{xtype:"combo",fieldLabel:"Double-click files action",name:"settings[ui_double_click]",hiddenName:"settings[ui_double_click]",autoCreate:true,mode:"local",editable:false,emptyText:"Select...",displayField:"name",valueField:"id",triggerAction:"all",disableKeyFilter:true,value:FR.settings.ui_double_click,store:new Ext.data.SimpleStore({fields:["id","name"],data:[["preview",FR.T("open preview")+" ("+FR.T("Default")+")"],["downloadb",FR.T("open in browser")],["download",FR.T("prompt to save")]]})}]},{xtype:"fieldset",defaults:{width:250},title:"File list",items:[{xtype:"radiogroup",vertical:true,columns:1,fieldLabel:"Default display mode",items:[{boxLabel:'<i class="fa fa-fw fa-list gray"></i> '+FR.T("Detailed list"),name:"settings[ui_default_view]",inputValue:"list",checked:FR.settings.ui_default_view=="list"},{boxLabel:'<i class="fa fa-fw fa-grid gray"></i> '+FR.T("Thumbnails"),name:"settings[ui_default_view]",inputValue:"thumbnails",checked:FR.settings.ui_default_view=="thumbnails"},{boxLabel:'<i class="fa fa-fw fa-grid2 gray"></i> '+FR.T("Large"),name:"settings[ui_default_view]",inputValue:"large_grid",checked:FR.settings.ui_default_view=="large_grid"},{boxLabel:'<i class="fa fa-fw fa-photo gray"></i> '+FR.T("Photos"),name:"settings[ui_default_view]",inputValue:"photos",checked:FR.settings.ui_default_view=="photos"}]},{xtype:"checkbox",fieldLabel:"Detailed list",boxLabel:"Show thumbnails",value:1,name:"settings[ui_thumbs_in_detailed]",checked:parseInt(FR.settings.ui_thumbs_in_detailed)},{xtype:"textfield",fieldLabel:"Paginate large folders",width:50,name:"settings[ui_file_page_size]",value:FR.settings.ui_file_page_size,suffix:"files per page",helpText:FR.T("The default value is %.").replace("%","300")+"<br>"+FR.T("Note that showing more than 1000 items per page can freeze a browser.")},{xtype:"checkbox",fieldLabel:"Hide dotfiles (~/.*)",value:1,name:"settings[ui_hide_dotfiles]",checked:parseInt(FR.settings.ui_hide_dotfiles),helpText:FR.T("Hidden files and folders are still visible and accessible via the API, WebDAV and apps.")+"<br>"+FR.T("Users can still create or upload hidden files and folders.")}]},{xtype:"fieldset",title:"Web Links",defaults:{width:250},items:[{xtype:"radiogroup",vertical:true,columns:1,fieldLabel:"Default display mode",items:[{boxLabel:'<i class="fa fa-fw fa-grid gray"></i> '+FR.T("Grid view"),name:"settings[weblinks_default_mode]",inputValue:"grid",checked:FR.settings.weblinks_default_mode=="grid"},{boxLabel:'<i class="fa fa-fw fa-list gray"></i> '+FR.T("List view"),name:"settings[weblinks_default_mode]",inputValue:"list",checked:FR.settings.weblinks_default_mode=="list"},{boxLabel:'<i class="fa fa-fw fa-picture-o gray"></i> '+FR.T("Image gallery"),name:"settings[weblinks_default_mode]",inputValue:"gallery",checked:FR.settings.ui_default_view=="gallery"}],helpText:FR.T('Changing this affects all existing web links, unless they were specifically shared with a mode other than the default one.<br> Web links that were shared with the parameter "<em>mode</em>" in the URL will not be affected.')},{xtype:"checkbox",fieldLabel:"Download all",boxLabel:"Hide option",value:1,name:"settings[weblinks_hide_download_all]",checked:parseInt(FR.settings.weblinks_hide_download_all)}]}],tbar:[{text:"Save changes",cls:"fr-btn-primary",ref:"saveBtn",handler:function(){var editForm=this.ownerCt.ownerCt;editForm.submitForm({url:FR.URLRoot+"/?module=cpanel&section=settings&action=save",maskText:"Saving changes...",params:editForm.form.getFieldValues()})}}]});Ext.getCmp("appTab").add(FR.editSettings.formPanel);Ext.getCmp("appTab").doLayout();